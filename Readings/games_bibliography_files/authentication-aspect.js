(function(a){var h=ep.clientData.lid;var g=false;var e=false;var f=false;var d="";var m="";var l="gbit";var i=ep.clientData.pid;var k=ep.clientData.esid;var j=ep.clientData.epsid;var c=(!t(j))?j:k;var b="";var n=Math.random().toFixed(4);a(window).on("unload",function(x){u("reload/navigation/close tab resetting to the original ");if(!t(b)){u("session is no longer active -- so performing clean up from storage state");p();}});var o=function(){var y="gbitTest";try{if(localStorage===null){u("unsupported browser");throw"unsupported browser";}d=l+"."+i+"."+c.substring(6,11);var x=localStorage.getItem(d);b=sessionStorage.getItem(d);if(t(x)&&t(b)){u("Invalid auth key doesnt exist for profile");throw"invalid access";}if(!t(b)){u("This is a refresh");g=true;e=(b.indexOf("|")===-1);}localStorage.setItem(y,y);localStorage.removeItem(y);}catch(z){a("body").empty();window.location.replace(h);}};var w=function(){var x=localStorage.getItem(d);var y=sessionStorage.getItem(d);var z=q();var A=(!t(z))?z:n;try{if(t(c)||t(x)||x.indexOf(c)===-1){if(!t(y)&&y.indexOf(c)!==-1){if(t(x)||x.indexOf(y)===-1){x=y.replace("|"+A,"");localStorage.setItem(d,x);x=localStorage.getItem(d);}}else{u("Invalid session during validatesession");throw"invalid access";}}}catch(B){a("body").empty();window.location.replace(h);return;}m=d+"."+A;v(x,A,c,e);if(!e&&g){u("this is a refresh of the current tab");}if(e){u("this is login");}b=sessionStorage.getItem(d);};function t(x){return(!x||0===x.length);}function r(){return !t(localStorage.getItem(m));}function s(){return !t(sessionStorage.getItem(d));}function v(z,C,A,B){var x=r();var y=s();if(!x){localStorage.setItem(m,1);}if(!y||B){sessionStorage.setItem(d,A+"|"+C);}}function u(x){if(window.console&&f){console.log(x);}}function q(){return(!t(b))?b.split("|")[1]:"";}function p(){var x=d+".";var y=false;localStorage.removeItem(m);for(var z=0;z<localStorage.length;z++){if(localStorage.key(z).indexOf(x)>-1){y=true;break;}}if(!y){u("cleaning up of "+d+" session");localStorage.removeItem(d);}}o();w();})(jQuery);